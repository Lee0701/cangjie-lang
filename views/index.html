<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no">
    <script src="/cangjie-lang.js"></script>
</head>
<script>

    const data = {
        '一': 'H@1100',
        '丨': 'V@0011',
        '丿': 'T@1211',
        '亅': 'VJ@121100',

        '二': '一@12|一',
        '三': '一@34;一@12|一',
        '十': '一+丨',
        
        '口': '(V+HV+H@11110011)@80',
        '日': 'V+HV+一+H@11110011',
        '曰': 'V+HV+一@80110000+H@11110011',
        '目': 'V+HV+((一!Z)+(Z;一))+H@11110011',
        '田': 'V+HV+一+丨+H@11110011',
        '囗': 'V+HV+H@11110011',

        '人': 'T@591100+P@12341214',
        '入': 'T@12900010+HP@60114000',
        '丷': 'D=(Z-T)',

        '月': '(WT@10110000+HVJ@90111000)+(H@90001013+H@90011023)',

        '門': '(V@+1日@11250000)-(~4日@11250000+VJ)',
        '冂': 'V+HVJ',

        '竹': '((T@121100+H@23001312)-(T@121100+H@23001312))@111300+(丨-亅)@11450015',
        '⺮': '(T@121100+H@23001312+D@12121312)-(T@121100+H@23001312+D@12121312)',

        '廿': '一@11000013+(丨@00111300+丨@00112300)+一@13001311',
        '艹': '一+(丨@00111300+丨@00112300)',

        '辶': 'D@101200;(HV@103400+UFP@11140034)',
        '⻍': '(D@101200|D@101200)|(HV@103400+UFP@11140034)',

        '土': '十@3411+H@11000011',
        '士': '十+H@34001811',
        '王': 'H@5611+土',
        '千': '(FT@1214;Z)+一+丨@11800020',

        '全': '入|王@4511',
        '金': '人|(王+丷@12131423)@4511',
        '舌': '千!口@1211',
        '回': '囗#口@2323',
        '明': '日@11350018-月',
        '向': '(丿;冂)^口',
        '早': '日@2311|十',
        '草': '艹;早',
    }

    window.onload = function() {
        const cangjie = new Cangjie(data)
        
        const canvas = document.getElementById('canvas')
        const ctx = canvas.getContext('2d')

        const margin = 8

        const x = margin
        const y = margin
        const w = canvas.width - margin*2
        const h = canvas.height - margin*2

        ctx.strokeStyle = 'black'
        ctx.lineWidth = 6
        ctx.lineCap = 'square'

        document.getElementById('search').onsubmit = function(e) {
            e.preventDefault()
            const str = document.getElementById('input').value

            const char = cangjie.parse(str)
            console.log(JSON.stringify(char, null, 2))

            ctx.clearRect(0, 0, canvas.width, canvas.height)
            char.render(ctx, x, y, w, h)
        }

    }
</script>
<body>
    <canvas id="canvas" width="128" height="128"></canvas>
    <form id="search">
        <input type="text" id="input">
        <input type="submit">
    </form>
</body>
</html>